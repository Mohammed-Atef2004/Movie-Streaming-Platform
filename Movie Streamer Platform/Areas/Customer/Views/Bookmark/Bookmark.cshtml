@using BLL.ViewModels
@model IEnumerable<BookmarkVM>
@{
    ViewBag.Title = "My Bookmarks";
}

<style>
    /* User Dark Theme Overrides */
    body {
        background-color: var(--background-color);
        color: var(--default-color);
    }

    .alert {
        border: none;
    }

    .alert-success {
        background-color: #198754;
        color: #fff;
    }

    .alert-danger {
        background-color: #dc3545;
        color: #fff;
    }

    .alert-info {
        background-color: #0dcaf0;
        color: #fff;
    }

    .card {
        background-color: var(--surface-color);
        border: 1px solid rgba(255, 255, 255, 0.1);
        width: 100% !important;
    }

    .card-img-top {
        height: 180px;
        object-fit: cover;
    }

    .card-title {
        color: var(--heading-color);
    }

    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
        color: #fff;
    }

    .btn-danger:hover {
        background-color: #b02a37;
        border-color: #a52834;
    }
</style>

@if (ViewBag.SuccessMessage != null)
{
    <div class="alert alert-success">@ViewBag.SuccessMessage</div>
}
@if (ViewBag.ErrorMessage != null)
{
    <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
}

<div class="container py-5">
    @if (!Model.Any())
    {
        <div class="alert alert-info text-center">No bookmarks found.</div>
    }
    else
    {
        <div class="row row-cols-1 row-cols-md-3 g-4">
            @foreach (var bookmark in Model)
            {
                <div class="col">
                    <div class="card shadow-sm rounded-3 overflow-hidden">
                        
                        <img src="@(bookmark.ImageUrl ?? "/images/poster-placeholder.jpg")"
                             class="card-img-top"
                             alt="Movie Poster"
                             onerror="this.onerror=null;this.src='/images/poster-placeholder.jpg';" />
                        
                        <div class="card-body">
                            <h5 class="card-title">
                                @(bookmark.MovieName ?? $"Movie ID: {bookmark.MovieId}")
                            </h5>
                        </div>

                        <div class="card-footer text-center">
                            <form asp-action="RemoveBookmark" method="post">
                                <input type="hidden" asp-for="@bookmark.UserId" />
                                <input type="hidden" asp-for="@bookmark.MovieId" />
                                <button type="submit" class="btn btn-danger btn-sm">
                                    <i class="fas fa-trash-alt"></i> Remove
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>